{"componentChunkName":"component---src-templates-post-template-jsx","path":"/posts/Elasticsearch-Cluster-Install-on-CentOS-7","result":{"data":{"site":{"siteMetadata":{"title":"Blog by Sam Perrin","subtitle":"Automation Consultant, currently working at Xtravirt. Interested in all things automation/devops related.","copyright":"Â© All rights reserved.","author":{"name":"Sam Perrin","twitter":"sam_perrin"},"disqusShortname":"","url":"https://samperrin.netlify.com"}},"markdownRemark":{"id":"a97f2e9e-94aa-5685-b6c3-cd513458ae7b","html":"<p>This post wont go in to any detail around setting up CentOS itself, but it will cover getting a simple 3 node Elasticsearch cluster up and running, with a couple of helpful plugins.</p>\n<p>Install Java and check the install</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">yum install java-1.8.0-openjdk.x86_64 -y\njava -version</code></pre></div>\n<p>Download Elasticsearch (check the site <a href=\"https://www.elastic.co/downloads/elasticsearch\">here</a> for the latest versions)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd /tmp\nwget https://download.elasticsearch.org/elasticsearch/release/org/elasticsearch/distribution/rpm/elasticsearch/2.2.1/elasticsearch-2.2.1.rpm</code></pre></div>\n<p>Install Elasticsearch</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd /tmp\nsudo rpm -ivh elasticsearch-2.2.1.rpm</code></pre></div>\n<p>This results in Elasticsearch being installed in <code>/usr/share/elasticsearch/</code> with its configuration files placed in <code>/etc/elasticsearch</code> and its init script added in <code>/etc/init.d/elasticsearch</code></p>\n<p>Enable Elasticsearch on Boot</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo systemctl enable elasticsearch.service</code></pre></div>\n<p>Configure Elasticsearch</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">vi /etc/elasticsearch/elasticsearch.yml</code></pre></div>\n<p>Add near the top, and replace anything in &#x3C; > with your details</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cluster.name: &lt;name of the cluster&gt;\n#below line dynamically sets the node name based on the server hostname\nnode.name: ${HOSTNAME}\n#below binds elasticsearch to the local (127.0.0.1) and site ip address (e.g. 192.168.1.1)\nnetwork.host: [_site_, _local_]\nhttp.port: 9200\nbootstrap.mlockall: true\n#below sets the nodes the cluster should find\ndiscovery.zen.ping.unicast.hosts: [&quot;&lt;node1_ip_or_fqdn&gt;&quot;, &quot;&lt;node2_ip_or_fqdn&gt;&quot;, &quot;&lt;node3_ip_or_fqdn&gt;&quot;]</code></pre></div>\n<p>Restart and Verify Elasticsearch status</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo systemctl restart elasticsearch.service\nsudo systemctl status elasticsearch.service</code></pre></div>\n<p>You should be able to access the node now, on: <code>http://&#x3C;node-ip>:9200</code></p>\n<p><strong>Optional:</strong> Install Elastic-HQ and Head Plugins</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd /usr/share/elasticsearch/\nbin/plugin install mobz/elasticsearch-head\nsudo bin/plugin install royrusso/elasticsearch-HQ\nsudo systemctl restart elasticsearch.service\nsudo systemctl status elasticsearch.service</code></pre></div>\n<p>Once installed, you can access these plugins via:<br>\nHead = http://<node-ip>:9200/<em>plugin/head<br>\nHQ = http://<node-ip>:9200/</em>plugin/hq</p>\n<p><strong>Additional Nodes:</strong></p>\n<p>Repeat the same process on your other servers, you can add more than 3 nodes to the cluster, but if you do make sure you update <code>discovery.zen.ping.unicast.hosts</code> in your Elasticsearch config to include those additional nodes.</p>","fields":{"tagSlugs":["/tags/other/","/tags/development/"],"slug":"/posts/Elasticsearch-Cluster-Install-on-CentOS-7"},"frontmatter":{"title":"Elasticsearch Cluster Install on CentOS 7","tags":["other","development"],"date":"2016-06-24T13:43:15.882Z","description":"Setup a simple 3 not Elasticsearch cluster"}}},"pageContext":{"slug":"/posts/Elasticsearch-Cluster-Install-on-CentOS-7"}}}